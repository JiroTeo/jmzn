webpackJsonp([10],{"8SO/":function(t,e){},Rhsk:function(t,e){const a=t=>(t=t.toString())[1]?t:"0"+t;t.exports={formatTime:t=>{const e=new Date(1e3*t),s=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),n=e.getHours(),l=e.getMinutes(),c=e.getSeconds();return[s,o,i].map(a).join("-")+" "+[n,l,c].map(a).join(":")},formatDuring:t=>{return{days:parseInt(t/864e5),hours:parseInt(t%864e5/36e5),minutes:parseInt(t%36e5/6e4),seconds:parseInt(t%6e4/1e3)}},htmlEscapt:function(t){return(t=t.replace(/(&lt;)|(&gt;)|(&amp;)|(&quot;)/g,function(t){switch(t){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return'"'}})).replace(/\<img/g,'<img style="max-width:100%;height:auto"')}}},vN4d:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),o=a.n(s),i=a("/KFX"),n=a("2qVQ"),l=a("nGsH"),c=a("Zrlr"),r=a.n(c),d=a("wxAW"),m=a.n(d),u=a("0Mti"),v=new(function(){function t(){r()(this,t)}return m()(t,[{key:"getData",value:function(t){return u.a.get("/index/item/item_detail",t)}},{key:"addFollow",value:function(t){return u.a.get("/index/follow/add_follow",t)}},{key:"removeFollow",value:function(t){return u.a.get("/index/follow/remove_follow",t)}},{key:"getConsult",value:function(t){return u.a.get("/index/consult/get_consult_list",t)}},{key:"addConsult",value:function(t){return u.a.get("/index/consult/add_consult",t)}},{key:"getCode",value:function(t){return u.a.get("/index/login/get_code",t)}},{key:"getImageCode",value:function(){return u.a.get("/index/login/imageCode")}}]),t}()),_=a("Rhsk"),p=a.n(_),g={name:"index.vue",data:function(){return{type:"0",banner:"",current:0,data:{item:{image:[]},user:{logo:""}},name:"",phone:"",sex:"0",code:"",imgcode:"",content:"",captcha:"",consult:{},consultForm:{},showCode:!0,outTime:60,dialogFormVisible:!1,formLabelWidth:"80px",rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],sex:[{required:!0,message:"请选择您的性别",trigger:"change"}],phone:[{required:!0,message:"请填写您的手机号",trigger:"blur"},{len:11,message:"手机号码格式不正确",trigger:"blur"}],img_code:[{required:!0,message:"请填写图片验证码",trigger:"blur"}],code:[{required:!0,message:"请输入手机验证码",trigger:"blur"}],content:[{required:!0,message:"请输入您要咨询的内容",trigger:"blur"}]},form:{},productid:""}},created:function(){var t=this;console.log("created"),this.id=this.$route.query.id,this.getData();var e=this.id;v.getConsult({id:e}).then(function(e){t.consult=e,console.log(t.consult)}),v.getImageCode().then(function(e){console.log("getImageCode",e),t.captcha=e})},beforeRouteUpdate:function(t,e,a){var s=this,o=t.query.id;this.id=o,this.getData(),v.getConsult({id:o}).then(function(t){s.consult=t,console.log(s.consult)}),v.getImageCode().then(function(t){console.log("getImageCode",t),s.captcha=t}),a()},methods:{getData:function(){var t=this,e=this.id;v.getData({id:e}).then(function(e){e.item&&(e.item.detail=p.a.htmlEscapt(e.item.detail)),t.banner=e.item.image[0],t.data=e})},addLike:function(t,e){var a=this;0==this.data.item.is_like?v.addFollow({id:e,type:2}).then(function(t){a.getData(),console.log("收藏+++++++++++")}):v.removeFollow({id:e,type:2}).then(function(t){a.getData(),console.log("收藏-----------------")})},addFollow:function(t,e){var a=this;console.log(e),0==this.data.item.is_foll?v.addFollow({id:e,type:1}).then(function(t){a.getData(),console.log("关注+++++++++++")}):v.removeFollow({id:e,type:1}).then(function(t){a.getData(),console.log("关注-----------------")})},changeImg:function(t,e){this.current=t,this.banner=this.data.item.image[t]},changeCaptcha:function(){var t=this;v.getImageCode().then(function(e){console.log(e),t.captcha=e})},validatePhone:function(t){return t?11==t.length||(this.$message.error("手机号码格式不正确"),!1):(this.$message.error("请输入手机号码"),!1)},getCode:function(){var t=this;console.log("this.form;",this.form);var e=this.form,a=e.phone,s=void 0===a?"":a,o=(e.img_code,this);this.validatePhone(s)&&v.getCode({phone:s,imgcode:imgcode}).then(function(e){t.showCode=!1,t.$message({message:"验证码获取成功",type:"success"});var a=setInterval(function(){0==o.outTime&&(o.showCode=!0,o.outTime=60,clearInterval(a)),o.outTime--},1e3)})},getCode2:function(){var t=this;console.log("this.form;",this.consultForm);var e=this.consultForm,a=e.phone,s=void 0===a?"":a,o=e.imgcode,i=void 0===o?"":o,n=this;this.validatePhone(s)&&v.getCode({phone:s,img_code:i}).then(function(e){t.showCode=!1,t.$message({message:"验证码获取成功",type:"success"});var a=setInterval(function(){0==n.outTime&&(n.showCode=!0,n.outTime=60,clearInterval(a)),n.outTime--},1e3)})},consultCommit:function(t){var e=this,a=this.data,s=this.consultForm,o=s.name,i=s.phone,n=s.sex,l=s.code,c=s.imgcode,r=s.content;""!=o?""!=i?""!=l?""!=c?""!=r?v.addConsult({type:0,item_id:a.item.id,name:o,phone:i,sex:n,code:l,img_code:c,content:r}).then(function(t){e.consultForm={},e.$message.success("提交成功")}):this.$message.error("请输入留言"):this.$message.error("图片验证码不能为空"):this.$message.error("手机验证码不能为空"):this.$message.error("手机号码不能为空"):this.$message.error("姓名不能为空")},submitForm:function(t){var e=this;console.log(this.form);var a=this.productid;this.$refs[t].validate(function(s){if(!s)return console.log("error submit!!"),!1;v.addConsult(o()({type:e.type,item_id:a},e.form)).then(function(a){e.dialogFormVisible=!1,e.$message({message:"提交成功",type:"success"}),e.resetForm(t)})})}},components:{Search:i.a,HotOrder:n.a,IndustryList:l.a}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("Search"),t._v(" "),s("div",{staticClass:"commonNav"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"part"},[s("router-link",{attrs:{to:"/"}},[s("span",[t._v("首页")]),t._v(" "),s("i")]),t._v(" "),s("router-link",{staticClass:"active",attrs:{to:"/list"}},[s("span",[t._v("找项目")]),t._v(" "),s("img",{staticClass:"hot",attrs:{src:a("J7Va")}}),t._v(" "),s("i")]),t._v(" "),s("router-link",{attrs:{to:"/rankingList"}},[s("span",[t._v("排行榜")]),t._v(" "),s("i")]),t._v(" "),s("router-link",{attrs:{to:"/news"}},[s("span",[t._v("行业资讯")]),t._v(" "),s("i")])],1),t._v(" "),s("router-link",{staticClass:"issueBtn",attrs:{to:"/enter"}},[t._v("发布招商项目"),s("i",{staticClass:"el-icon-arrow-right"})])],1)]),t._v(" "),s("div",{staticClass:"greyBg"},[s("div",{staticClass:"wrapper clearfix"},[s("p",{staticClass:"adress"},[t._v("您的位置： "),s("router-link",{attrs:{to:"/list?cateid="+t.data.item.cate_pid}},[t._v(t._s(t.data.item.father_cate_name))]),t._v(" > "),s("router-link",{attrs:{to:"/list?cateid="+t.data.item.cate_pid+"&childid="+t.data.item.cate_id}},[t._v(t._s(t.data.item.cate_name))]),t._v(" > "+t._s(t.data.item.item_name))],1),t._v(" "),s("div",{staticClass:"detailLeft"},[s("div",{staticClass:"itemBox clearfix"},[s("div",{staticClass:"itemPic"},[s("img",{staticClass:"bigPic",attrs:{src:t.banner}}),t._v(" "),s("div",{staticClass:"between"},t._l(t.data.item.image,function(e,a){return s("label",{class:{active:a==t.current},on:{click:function(e){return t.changeImg(a,e)}}},[s("img",{attrs:{src:e}}),t._v(" "),s("span",{staticClass:"border"})])}),0)]),t._v(" "),s("div",{staticClass:"itemDesc"},[s("h2",[t._v(t._s(t.data.item.item_name))]),t._v(" "),s("p",{staticClass:"price"},[t._v(t._s(t.data.item.min_money)+"~"+t._s(t.data.item.max_money)+"万元")]),t._v(" "),s("p",{staticClass:"suit"},[s("span",[t._v("所属行业："+t._s(t.data.item.cate_name))]),t._v(" "),s("span",[t._v("适合人群："+t._s(t.data.item.crowd))])]),t._v(" "),s("div",{staticClass:"numBox around"},[s("label",{staticClass:"block"},[s("b",[t._v(t._s(t.data.item.shop_count)+"家")]),t._v(" "),s("i",[t._v("直营店")])]),t._v(" "),s("span",{staticClass:"line"}),t._v(" "),s("label",{staticClass:"block"},[s("b",[t._v(t._s(t.data.item.fran_store_num)+"家")]),t._v(" "),s("i",[t._v("加盟店")])]),t._v(" "),s("span",{staticClass:"line"}),t._v(" "),s("label",{staticClass:"block"},[s("b",[t._v(t._s(t.data.item.area_name))]),t._v(" "),s("i",[t._v("加盟区域")])]),t._v(" "),s("span",{staticClass:"line"}),t._v(" "),s("label",{staticClass:"block"},[s("b",[t._v(t._s(t.data.item.apply)+"人")]),t._v(" "),s("i",[t._v("申请加盟")])])]),t._v(" "),s("div",{staticClass:"btnsBox between"},[s("span",{staticClass:"consultBtn",on:{click:function(e){e.stopPropagation(),t.dialogFormVisible=!0,t.productid=t.data.item.id,t.type="0"}}},[t._v("立即咨询")]),t._v(" "),s("span",{staticClass:"planBtn",on:{click:function(e){e.stopPropagation(),t.dialogFormVisible=!0,t.productid=t.data.item.id,t.type="1"}}},[t._v("获取开店方案")]),t._v(" "),s("span",{staticClass:"collectBtn",class:{on:1==t.data.item.is_like},on:{click:function(e){return t.addLike(e,t.data.item.id)}}},[s("i",{staticClass:"iconfont icon-collect"})]),t._v(" "),s("span",{staticClass:"focusBtn",class:{on:1==t.data.item.is_foll},on:{click:function(e){return t.addFollow(e,t.data.item.id)}}},[s("i",{staticClass:"iconfont icon-focus"})])]),t._v(" "),s("p",{staticClass:"yellowWord"},[s("span",[t._v("项目关注 "),s("b",[t._v(t._s(t.data.item.followcount))])]),t._v(" "),s("span",[t._v("项目收藏 "),s("b",[t._v(t._s(t.data.item.collectcount))])]),t._v(" "),s("span",[t._v("项目咨询 "),s("b",[t._v(t._s(t.data.item.apply))])])])])]),t._v(" "),s("div",{staticClass:"introBox"},[s("h3",[t._v("项目详情")]),t._v(" "),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.data.item.detail)}})]),t._v(" "),s("div",{staticClass:"consultBox"},[s("div",{staticClass:"title between"},[s("h3",[t._v("用户咨询")]),t._v(" "),s("span",[t._v(t._s(t.consult.count)+"人申请加盟")])]),t._v(" "),t._l(t.consult.data,function(e,a){return s("dl",{staticClass:"consultDL between"},[s("dt",[s("img",{attrs:{src:e.avatar}})]),t._v(" "),s("dd",[s("p",{staticClass:"inf between"},[s("span",[t._v(t._s(e.username))]),t._v(" "),s("span",[t._v(t._s(e.addtime))])]),t._v(" "),s("p",{staticClass:"word"},[t._v(t._s(e.content))])])])}),t._v(" "),t.consult.count>4?s("span",{staticClass:"lookBtn"},[t._v("查看更多 "),s("i",{staticClass:"el-icon-caret-bottom"})]):t._e()],2),t._v(" "),s("div",{staticClass:"onceBox"},[t._m(0),t._v(" "),s("div",{staticClass:"conContent clearfix between"},[s("div",{staticClass:"row clearfix clearfix"},[s("div",{staticClass:"column between"},[s("label",[t._v("姓名")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.consultForm.name,expression:"consultForm.name"}],staticClass:"nameInp",attrs:{type:"text",placeholder:"请输入您的姓名"},domProps:{value:t.consultForm.name},on:{input:function(e){e.target.composing||t.$set(t.consultForm,"name",e.target.value)}}}),t._v(" "),s("div",{staticClass:"fr"},[[s("el-radio",{staticClass:"sexLabel",attrs:{label:"1"},model:{value:t.consultForm.sex,callback:function(e){t.$set(t.consultForm,"sex",e)},expression:"consultForm.sex"}},[t._v("男")]),t._v(" "),s("el-radio",{staticClass:"sexLabel",attrs:{label:"0"},model:{value:t.consultForm.sex,callback:function(e){t.$set(t.consultForm,"sex",e)},expression:"consultForm.sex"}},[t._v("女")])]],2)]),t._v(" "),s("div",{staticClass:"column between"},[s("label",{staticClass:"leave"},[t._v("留言")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.consultForm.content,expression:"consultForm.content"}],attrs:{placeholder:"请输入留言内容"},domProps:{value:t.consultForm.content},on:{input:function(e){e.target.composing||t.$set(t.consultForm,"content",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"row clearfix clearfix"},[s("div",{staticClass:"column between"},[s("label",[t._v("手机号")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.consultForm.phone,expression:"consultForm.phone"}],staticClass:"textInp",attrs:{type:"text",placeholder:"请输入您的手机号"},domProps:{value:t.consultForm.phone},on:{input:function(e){e.target.composing||t.$set(t.consultForm,"phone",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"column between"},[s("label",[t._v("图片验证")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.consultForm.imgcode,expression:"consultForm.imgcode"}],staticClass:"checkInp",attrs:{type:"text",placeholder:"请输入图片验证验证码"},domProps:{value:t.consultForm.imgcode},on:{input:function(e){e.target.composing||t.$set(t.consultForm,"imgcode",e.target.value)}}}),t._v(" "),s("img",{staticClass:"captcha",attrs:{src:t.captcha},on:{click:t.changeCaptcha}})]),t._v(" "),s("div",{staticClass:"column between"},[s("label",[t._v("验证码")]),t._v(" "),s("div",{staticClass:"between",staticStyle:{width:"322px"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.consultForm.code,expression:"consultForm.code"}],staticClass:"checkInp",attrs:{type:"text",placeholder:"请输入手机验证码"},domProps:{value:t.consultForm.code},on:{input:function(e){e.target.composing||t.$set(t.consultForm,"code",e.target.value)}}}),t._v(" "),t.showCode?s("span",{staticClass:"checkBtn",on:{click:t.getCode2}},[t._v("获取验证码")]):s("span",{staticClass:"checkBtn"},[t._v(t._s(t.outTime)+"S后重新获取")])])])])]),t._v(" "),s("div",{staticClass:"commitBtn",on:{click:t.consultCommit}},[t._v("提交")])])]),t._v(" "),s("div",{staticClass:"detailRight"},[s("div",{staticClass:"companyInf"},[t._m(1),t._v(" "),s("dl",[s("dt",[s("img",{attrs:{src:t.data.user.logo}}),t._v(" "),s("p",[t._v(t._s(t.data.user.company))])]),t._v(" "),s("dd",[s("p",[t._v("公司性质："+t._s(t.data.user.character))]),t._v(" "),s("p",[t._v("注册资金："+t._s(t.data.user.money)+"万元")]),t._v(" "),s("p",[t._v("经营范围："+t._s(t.data.user.scope))]),t._v(" "),s("p",[t._v("品牌注册时间："+t._s(t.data.user.brand_make_time))]),t._v(" "),s("p",[t._v("注册地址："+t._s(t.data.user.address))])])])]),t._v(" "),s("HotOrder",{staticClass:"hotOrder"}),t._v(" "),s("IndustryList",{staticClass:"IndustryList"})],1)])]),t._v(" "),s("el-dialog",{attrs:{title:"1"==t.type?"获取开店方案":"立即咨询",visible:t.dialogFormVisible,center:"",width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[s("el-form-item",{attrs:{label:"姓名","label-width":t.formLabelWidth,prop:"name"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入您的姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"性别","label-width":t.formLabelWidth,prop:"sex"}},[s("el-radio-group",{model:{value:t.form.sex,callback:function(e){t.$set(t.form,"sex",e)},expression:"form.sex"}},[s("el-radio",{attrs:{label:"1"}},[t._v("男")]),t._v(" "),s("el-radio",{attrs:{label:"0"}},[t._v("女")])],1)],1),t._v(" "),s("el-form-item",{attrs:{label:"手机","label-width":t.formLabelWidth,prop:"phone"}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入您的手机号"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),s("el-form-item",{staticClass:"code",attrs:{label:"图片验证","label-width":t.formLabelWidth,prop:"img_code"}},[s("el-input",{staticClass:"codeLeft",attrs:{placeholder:"请输入图片验证码"},model:{value:t.form.img_code,callback:function(e){t.$set(t.form,"img_code",e)},expression:"form.img_code"}}),t._v(" "),s("img",{staticClass:"codeRight",attrs:{src:t.captcha,alt:""},on:{click:t.changeCaptcha}})],1),t._v(" "),s("el-form-item",{staticClass:"code",attrs:{label:"验证码","label-width":t.formLabelWidth,prop:"code"}},[s("el-input",{attrs:{placeholder:"请输入手机验证码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),t._v(" "),s("div",{staticClass:"codeRight"},[t.showCode?s("div",{staticClass:"codeBtn",on:{click:t.getCode}},[t._v("\n            获取验证码\n          ")]):s("div",{staticClass:"codeBtn outTime"},[t._v("\n            "+t._s(t.outTime)+"S后重新获取\n          ")])])],1),t._v(" "),s("el-form-item",{attrs:{label:"","label-width":t.formLabelWidth,prop:"content"}},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入您要咨询的内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("立即咨询")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title between"},[e("h3",[this._v("公司信息")])])}]};var f=a("VU/8")(g,h,!1,function(t){a("8SO/")},"data-v-4b135571",null);e.default=f.exports}});
//# sourceMappingURL=10.9f9e2932ef9a07a5c919.js.map