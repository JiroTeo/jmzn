(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-productList-productDetail-IM"],{"00fa":function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=a(i("4f03")),o=a(i("58b5"));function a(e){return e&&e.__esModule?e:{default:e}}var r=getApp(),l={data:function(){return{messageArr:[],content:"",emojiFlag:!1,isLoad:"",username:""}},components:{Emoji:o.default},methods:{loginIM:function(){var e=this;r.globalData.JIM.isLogin()?e.getMessage():r.loginIM().then(function(){e.getMessage()})},getMessage:function(){var e=this,n=this.username;r.globalData.JIM.onSyncConversation(function(i){console.log("data=======",i),i.forEach(function(i,o){i.from_username==n&&(i.msgs.forEach(function(n,i){(new Date).getDate()==new Date(n.content.create_time).getDate()?n.ctime_ms=new Date(n.content.create_time).Format("hh:mm"):n.ctime_ms=new Date(n.content.create_time).Format("yyyy-MM-dd"),"text"==n.content.msg_type?n.content.msg_body.text=t.default.generateRichTextNode(n.content.msg_body.text):"image"==n.content.msg_type&&r.globalData.JIM.getResource({media_id:n.content.msg_body.media_id}).onSuccess(function(n){e.messageArr[i].content.msg_body.media_url=n.url,e.autoScroll()}).onFail(function(e){})}),e.messageArr=i.msgs,e.autoScroll())})})},autoScroll:function(){var e=this,n=uni.createSelectorQuery();this.isLoad;n.selectViewport().scrollOffset(),n.select("#recordWrapper").boundingClientRect(),n.exec(function(n){e.isLoad=!1,console.log(""),uni.pageScrollTo({scrollTop:8e3})})},handleImagePreview:function(e){var n=e.target.dataset.image;uni.previewImage({current:n,urls:[n]})},toggleEmoji:function(){this.emojiFlag=!this.emojiFlag},hideEmoji:function(){this.emojiFlag=!1},emojiCLick:function(e){console.log("调用了回调",e);var n=e;if("[删除]"!=n)"["==n[0]&&(this.content=this.content+n);else{var i=this.content.lastIndexOf("[");-1!=i&&(this.content=this.content.slice(0,i))}},chooseImageToSend:function(e){e.currentTarget.dataset.type;var n=this,i=this.username;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var t=e.tempFilePaths[0];r.globalData.JIM.sendSinglePic({target_username:i,image:t}).onSuccess(function(e,t){r.globalData.JIM.getResource({media_id:t.content.msg_body.media_id}).onSuccess(function(e){t.content.msg_body.media_url=e.url,t.ctime_ms=new Date(t.content.create_time).Format("hh:mm"),n.messageArr[n.messageArr.length]=t,n.autoScroll()}).onFail(function(e){}),r.globalData.JIM.updateConversation({username:i,extras:{lastConversation:"[图片]"}})}).onFail(function(e){})}})},inputChange:function(e){var n=e.detail.value;this.content=n},sendMessage:function(){var e=this.username,n=this.content,i=this;this.hideEmoji(),console.log({username:e,content:n}),r.globalData.JIM.sendSingleMsg({target_username:e,content:n,extras:{lastConversation:n}}).onSuccess(function(o,a){a.ctime_ms=new Date(a.content.create_time).Format("hh:mm"),a.content.msg_body.text=t.default.generateRichTextNode(a.content.msg_body.text),i.messageArr.push(a),i.messageArr=i.messageArr,i.content="",i.autoScroll(),r.globalData.JIM.updateConversation({username:e,extras:{lastConversation:n}})}).onFail(function(e){})}},onLoad:function(e){var n=e.username,i=e.nickname;uni.setNavigationBarTitle({title:"与"+i+"对话中"}),this.username=n,this.isLoad=!0},onShow:function(){var e=this;console.log("sdfsfsdfsdfsdfsdf");var n=this;r.initIM().then(function(){n.loginIM()}),r.globalData.JIM.onMsgReceive(function(i){e.messageArr=e.messageArr.concat(i.messages),n.autoScroll()})},onUnload:function(){r.globalData.JIM.loginOut()}};n.default=l},"13f9":function(e,n,i){n=e.exports=i("2350")(!1),n.push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*聊天输入框  */.chatinput-wrapper[data-v-72b86775]{width:100%;background-color:#fff;border:%?2?% solid #ccc;position:fixed;bottom:0;left:0}.chatinput-content[data-v-72b86775]{width:100%;height:%?100?%}.chatinput-img[data-v-72b86775]{width:%?60?%;height:%?60?%;border-radius:100%;margin:%?20?% %?20?%;display:inline-block}.chatinput-img.emoji[data-v-72b86775]{margin:%?20?% %?10?%}.chatinput-img[data-v-72b86775]:active{opacity:.6}.chatinput-input[data-v-72b86775]{width:%?466?%;min-height:%?72?%;border-radius:%?12?%;border:1px solid #ccc;margin-top:%?15?%;display:inline-block;vertical-align:top;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:%?20?%;font-size:%?30?%}\n/*subcontent wrapper  */.chatinput-subcontent[data-v-72b86775]{width:100%;height:%?380?%;background-color:#999}.fr[data-v-72b86775]{float:right}\n/*聊天记录  */.record-wrapper[data-v-72b86775]{width:100%;padding-bottom:%?100?%;padding-top:%?80?%}.record-chatting-item[data-v-72b86775]{width:100%;padding:%?20?% %?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.record-item-time-wrapper[data-v-72b86775]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.record-item-time[data-v-72b86775]{padding:%?4?% %?10?%;background:#d6d6d6;border-radius:%?8?%;font-size:%?24?%;color:#fff}.record-chatting-item-img[data-v-72b86775]{width:%?80?%;height:%?80?%;display:inline-block}.record-chatting-item-text[data-v-72b86775]{max-width:70%;border-radius:%?8?%;background-color:#f9f3e4;padding:%?16?%;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box;word-wrap:break-word;overflow:hidden;font-size:%?32?%;line-height:%?48?%}.self[data-v-72b86775]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;color:#fff}.other[data-v-72b86775]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;color:#222}.send[data-v-72b86775]{width:%?85?%;height:%?60?%;line-height:%?60?%;text-align:center;background-color:#cf9f5f;color:#fff;display:inline-block;vertical-align:top;margin:%?20?% %?0?%;border-radius:%?10?%}.icon-tupian[data-v-72b86775]{width:%?60?%;height:%?60?%;font-size:%?58?%;border-radius:100%;margin:%?20?% %?20?%;display:inline-block;vertical-align:top;color:#888}",""])},"2a0e":function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t="http://yx-web.nosdn.127.net/webdoc/h5/emoji",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAk1BMVEUAAADAwMC3t7e/v7/Gxsa/v7+/v7/AwMC/v7+/v7+/v7++vr7CwsK/v7+/v7+/v7++vr6/v7+/v7+/v7+/v7+/v7/AwMCbm5u/v7+/v7+/v7+/v7/AwMC/v7+/v7+/v7+/v7+/v7+/v7++vr7AwMC9vb2/v7+/v7/CwsLAwMDHx8fExMTIyMjLy8vJycnKysrPz8+3r5/kAAAAKHRSTlMA8Q39A/vcIwf34B0P1uNJIuzPjHFqFwVFmls4J761rMiFoVJ6XTNYKpTiKQAAAylJREFUeF7tmEl3ozAQhNt0ywYM3rfETuJMltEC2P//1w3IVg555olmHjfVlcMnAVUtFfgVFBQUFBQUFBREXAAR8BVnEUNZzF8YwTYdsZQ/Pcc8CsGmNEpyZMoqn/MYzxoFomIIhTDFujtjD3OlEFEyVENqzHUN1HUfx0QiKjliKJEVIorioxuF4LQ0AkW53mddf7Asmh5eNaLQeUfGLtUN4w8wtbaULlshiFZVw3gF7g8Jr4UQ5ZMfQkAvl5pRnWO+teYGhT53YMBbWTP0OAMCrqaJQjmLwKunhmGWkx4MiEZSyZEPQvDeMGRy7MOAbCTRCyHYFqqx+Rxi6KHIC7FhYrCW/gKCQSAuTBRWGwaDCSE4CmmNDtRhJhFxIS5M2o1uweQZmw7iC5N2o58O9EMhyDabjAdxYdJudIINytXiTiGY5tfrKuJBXJjo8a6FsUiMuIynQDfGuEqScgvEgLgwaTU6wVEJFEVDsYxCoOBBXJjI5LvdIOeyoaRTiGGaNowqZ7wuFybYYnT3vlJ928t9H3o2AeoOIdhUHqNbykzb9R/y6jfDDyH40g3jYo3uo6CUEh2jM4TgYE8mv4z+kJIWeFORToDn+FUhEI1/ohNMxtIy5NgyGJBspBDlMvKnYtzMV1SIxo6CYXeiZG69P8g3mbhvIqrGlQyIG1Xi8ukobYzb32UkOu93hrihi6i3QB5G48aD9aKl8B2vlPyAvYehZyc4WZqjMLMLFR5aKdHN5+kC4nvClGcA4Kdwe0ISbMs7g35yTB6B+swTs1wAtUCSpLBZcnt3lTBJTew1GXX+eGrVj69X5/OGkhu5Aeo54y+rGOjh489Py3drmn//z2nlBR5TPKcV5rnr7SEF9nvGuct3HW2uMVzxz8KifAcaDOICRhVboMEg7kiB5m/f+4nyQ34CRtmAGWAnLmD637V2I2Vn7I+8AXPiF0sHiWjyGDrf43W663WPv7wBdW8kqlXUp5Eonn9BfAGTRYxuZX7vVmJGSyQQTcJpiUxLS+QJGKW4fRfavovX3Clmc6f1mtlBXuSQHaSjLAdoU4fvhYdvuIOCgoKCgoL+AXU1fW2kbFGNAAAAAElFTkSuQmCC",a=[],r={emoji:{"[大笑]":{file:"emoji_0.png"},"[可爱]":{file:"emoji_01.png"},"[色]":{file:"emoji_02.png"},"[嘘]":{file:"emoji_03.png"},"[亲]":{file:"emoji_04.png"},"[呆]":{file:"emoji_05.png"},"[口水]":{file:"emoji_06.png"},"[汗]":{file:"emoji_145.png"},"[呲牙]":{file:"emoji_07.png"},"[鬼脸]":{file:"emoji_08.png"},"[害羞]":{file:"emoji_09.png"},"[偷笑]":{file:"emoji_10.png"},"[调皮]":{file:"emoji_11.png"},"[可怜]":{file:"emoji_12.png"},"[敲]":{file:"emoji_13.png"},"[惊讶]":{file:"emoji_14.png"},"[流感]":{file:"emoji_15.png"},"[委屈]":{file:"emoji_16.png"},"[流泪]":{file:"emoji_17.png"},"[嚎哭]":{file:"emoji_18.png"},"[惊恐]":{file:"emoji_19.png"},"[怒]":{file:"emoji_20.png"},"[酷]":{file:"emoji_21.png"},"[不说]":{file:"emoji_22.png"},"[鄙视]":{file:"emoji_23.png"},"[阿弥陀佛]":{file:"emoji_24.png"},"[奸笑]":{file:"emoji_25.png"},"[睡着]":{file:"emoji_26.png"},"[口罩]":{file:"emoji_27.png"},"[努力]":{file:"emoji_28.png"},"[抠鼻孔]":{file:"emoji_29.png"},"[疑问]":{file:"emoji_30.png"},"[怒骂]":{file:"emoji_31.png"},"[晕]":{file:"emoji_32.png"},"[呕吐]":{file:"emoji_33.png"},"[拜一拜]":{file:"emoji_160.png"},"[惊喜]":{file:"emoji_161.png"},"[流汗]":{file:"emoji_162.png"},"[卖萌]":{file:"emoji_163.png"},"[默契眨眼]":{file:"emoji_164.png"},"[烧香拜佛]":{file:"emoji_165.png"},"[晚安]":{file:"emoji_166.png"},"[强]":{file:"emoji_34.png"},"[弱]":{file:"emoji_35.png"},"[OK]":{file:"emoji_36.png"},"[拳头]":{file:"emoji_37.png"},"[胜利]":{file:"emoji_38.png"},"[鼓掌]":{file:"emoji_39.png"},"[握手]":{file:"emoji_200.png"},"[发怒]":{file:"emoji_40.png"},"[骷髅]":{file:"emoji_41.png"},"[便便]":{file:"emoji_42.png"},"[火]":{file:"emoji_43.png"},"[溜]":{file:"emoji_44.png"},"[爱心]":{file:"emoji_45.png"},"[心碎]":{file:"emoji_46.png"},"[钟情]":{file:"emoji_47.png"},"[唇]":{file:"emoji_48.png"},"[戒指]":{file:"emoji_49.png"},"[钻石]":{file:"emoji_50.png"},"[太阳]":{file:"emoji_51.png"},"[有时晴]":{file:"emoji_52.png"},"[多云]":{file:"emoji_53.png"},"[雷]":{file:"emoji_54.png"},"[雨]":{file:"emoji_55.png"},"[雪花]":{file:"emoji_56.png"},"[爱人]":{file:"emoji_57.png"},"[帽子]":{file:"emoji_58.png"},"[皇冠]":{file:"emoji_59.png"},"[篮球]":{file:"emoji_60.png"},"[足球]":{file:"emoji_61.png"},"[垒球]":{file:"emoji_62.png"},"[网球]":{file:"emoji_63.png"},"[台球]":{file:"emoji_64.png"},"[咖啡]":{file:"emoji_65.png"},"[啤酒]":{file:"emoji_66.png"},"[干杯]":{file:"emoji_67.png"},"[柠檬汁]":{file:"emoji_68.png"},"[餐具]":{file:"emoji_69.png"},"[汉堡]":{file:"emoji_70.png"},"[鸡腿]":{file:"emoji_71.png"},"[面条]":{file:"emoji_72.png"},"[冰淇淋]":{file:"emoji_73.png"},"[沙冰]":{file:"emoji_74.png"},"[生日蛋糕]":{file:"emoji_75.png"},"[蛋糕]":{file:"emoji_76.png"},"[糖果]":{file:"emoji_77.png"},"[葡萄]":{file:"emoji_78.png"},"[西瓜]":{file:"emoji_79.png"},"[光碟]":{file:"emoji_80.png"},"[手机]":{file:"emoji_81.png"},"[电话]":{file:"emoji_82.png"},"[电视]":{file:"emoji_83.png"},"[声音开启]":{file:"emoji_84.png"},"[声音关闭]":{file:"emoji_85.png"},"[铃铛]":{file:"emoji_86.png"},"[锁头]":{file:"emoji_87.png"},"[放大镜]":{file:"emoji_88.png"},"[灯泡]":{file:"emoji_89.png"},"[锤头]":{file:"emoji_90.png"},"[烟]":{file:"emoji_91.png"},"[炸弹]":{file:"emoji_92.png"},"[枪]":{file:"emoji_93.png"},"[刀]":{file:"emoji_94.png"},"[药]":{file:"emoji_95.png"},"[打针]":{file:"emoji_96.png"},"[钱袋]":{file:"emoji_97.png"},"[钞票]":{file:"emoji_98.png"},"[银行卡]":{file:"emoji_99.png"},"[手柄]":{file:"emoji_100.png"},"[麻将]":{file:"emoji_101.png"},"[调色板]":{file:"emoji_102.png"},"[电影]":{file:"emoji_103.png"},"[麦克风]":{file:"emoji_104.png"},"[耳机]":{file:"emoji_105.png"},"[音乐]":{file:"emoji_106.png"},"[吉他]":{file:"emoji_107.png"},"[火箭]":{file:"emoji_108.png"},"[飞机]":{file:"emoji_109.png"},"[火车]":{file:"emoji_110.png"},"[公交]":{file:"emoji_111.png"},"[轿车]":{file:"emoji_112.png"},"[出租车]":{file:"emoji_113.png"},"[警车]":{file:"emoji_114.png"},"[自行车]":{file:"emoji_115.png"}}};for(var l in r){var s=r[l];for(var c in s){var m=s[c];m.img="".concat(t,"/").concat(l,"/").concat(m.file)}}r["ajmd"]={},r["xxy"]={},r["lt"]={};for(var f=1;f<=48;f++){var g="ajmd0"+(f>=10?f:"0"+f);r["ajmd"][g]={file:g+".png"}}for(var u=1;u<=40;u++){var d="xxy0"+(u>=10?u:"0"+u);r["xxy"][d]={file:d+".png"}}for(var p=1;p<=20;p++){var h="lt0"+(p>=10?p:"0"+p);r["lt"][h]={file:h+".png"}}for(var j in r){var b=r[j];for(var v in b){var _=b[v];_.img="".concat(t,"/").concat(j,"/").concat(_.file)}a.push({album:j,img:b[Object.keys(b)[0]]["img"]})}r["emoji"]["[删除]"]={},r["emoji"]["[删除]"]["img"]=o;var x={emojiList:r,albumArr:a};n.default=x},3410:function(e,n,i){n=e.exports=i("2350")(!1),n.push([e.i,".emoji-wrapper[data-v-63a94d45]{width:100%;height:100%;background-color:#fff;border-top:%?2?% solid #ccc}\n/*内容  */.emoji-content[data-v-63a94d45]{width:100%;height:%?360?%;\n  /* padding-top: 30upx; */padding-left:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.emoji-content-swiper[data-v-63a94d45]{width:100%;height:100%}.emoji-content-item[data-v-63a94d45]{display:inline-block;margin:%?17?%}.emoji-content-img-emoji[data-v-63a94d45]{width:%?56?%;height:%?56?%}.emoji-content-img-other[data-v-63a94d45]{width:%?100?%;height:%?100?%}\n/*底部类别  */.emoji-album[data-v-63a94d45]{width:100%;height:%?88?%;border:%?2?% solid #999;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff}.emoji-album-left[data-v-63a94d45]{display:inline-block;height:100%}.emoji-album-left-img[data-v-63a94d45]{width:%?88?%;height:100%;padding:%?8?% %?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;border-right:%?2?% soild #999}.emoji-send[data-v-63a94d45]{width:%?88?%;height:100%;line-height:%?88?%;background-color:#0091e4;text-align:center;float:right;color:#fff}.album-active[data-v-63a94d45]{background-color:#aaa}",""])},"4f03":function(e,n,i){"use strict";var t=o(i("2a0e"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var n=new Date(1e3*e),i=n.getFullYear(),t=n.getMonth()+1,o=n.getDate(),a=n.getHours(),r=n.getMinutes(),s=n.getSeconds();return[i,t,o].map(l).join("-")+" "+[a,r,s].map(l).join(":")},r=function(e){var n=/(&lt;)|(&gt;)|(&amp;)|(&quot;)/g;return e=e.replace(n,function(e){switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return'"'}}),e.replace(/\<img/g,'<img style="max-width:100%;height:auto"')},l=function(e){return e=e.toString(),e[1]?e:"0"+e},s=function(e){var n=parseInt(e/864e5),i=parseInt(e%864e5/36e5),t=parseInt(e%36e5/6e4),o=parseInt(e%6e4/1e3);return{days:n,hours:i,minutes:t,seconds:o}};function c(e){var n=t.default.emojiList.emoji,i=e,o=[],a=i.indexOf("["),r=i.indexOf("]"),l=0;if(Array.from(i).map(function(e){"["!=e&&"]"!=e&&l++}),-1==a||-1==r||0==l)return o.push({type:"text",text:i}),o;while(0!=i.length)if(a=i.indexOf("["),r=i.indexOf("]"),0==a)if(r=i.indexOf("]"),-1==r)o.push({type:"text",text:i}),i="";else{var s=i.slice(0,r+1);n[s]?o.push({name:"img",attrs:{width:"30rpx",height:"30rpx",src:n[s].img}}):o.push({type:"text",text:s}),i=i.substring(r+1,i.length)}else-1==a?(o.push({type:"text",text:i.slice(0,i.length)}),i=""):(o.push({type:"text",text:i.slice(0,a)}),i=i.substring(a,i.length+1));return o}e.exports={formatTime:a,formatDuring:s,htmlEscapt:r,generateRichTextNode:c}},"58b5":function(e,n,i){"use strict";i.r(n);var t=i("5a06"),o=i("b90a");for(var a in o)"default"!==a&&function(e){i.d(n,e,function(){return o[e]})}(a);i("a30d");var r=i("2877"),l=Object(r["a"])(o["default"],t["a"],t["b"],!1,null,"63a94d45",null);n["default"]=l.exports},"5a06":function(e,n,i){"use strict";var t=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("v-uni-view",{staticClass:"emoji-wrapper"},[i("v-uni-view",{staticClass:"emoji-content"},[i("v-uni-swiper",{staticClass:"emoji-content-swiper",attrs:{"indicator-dots":"true"}},e._l(e.currentAlbumKeys,function(n){return i("v-uni-swiper-item",{on:{click:function(n){n=e.$handleEvent(n),e.emojiTap(n)}}},e._l(n,function(n){return i("v-uni-view",{key:n,staticClass:"emoji-content-item"},[i("v-uni-image",{class:["emoji"==e.currentAlbum?"emoji-content-img-emoji":"emoji-content-img-other"],attrs:{src:e.emojiList[e.currentAlbum][n].img,"data-emoji":n}})],1)}),1)}),1)],1)],1)},o=[];i.d(n,"a",function(){return t}),i.d(n,"b",function(){return o})},"737c":function(e,n,i){"use strict";i.r(n);var t=i("9587"),o=i("aae3c");for(var a in o)"default"!==a&&function(e){i.d(n,e,function(){return o[e]})}(a);i("fa1f");var r=i("2877"),l=Object(r["a"])(o["default"],t["a"],t["b"],!1,null,"72b86775",null);n["default"]=l.exports},"8a23":function(e,n,i){var t=i("3410");"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var o=i("4f06").default;o("2b505f4a",t,!0,{sourceMap:!1,shadowMode:!1})},9587:function(e,n,i){"use strict";var t=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("v-uni-view",{staticClass:"IM common"},[i("v-uni-view",{staticClass:"record-wrapper",attrs:{id:"recordWrapper"}},e._l(e.messageArr,function(n){return i("v-uni-view",[""!=n.ctime_ms?i("v-uni-view",{staticClass:"record-item-time-wrapper"},[i("v-uni-text",{staticClass:"record-item-time"},[e._v(e._s(n.ctime_ms))])],1):e._e(),"username"==n.content.from_id?i("v-uni-view",{staticClass:"record-chatting-item other",staticStyle:{"justify-content":"flex-start"}},["text"===n.content.msg_type?i("v-uni-rich-text",{staticClass:"record-chatting-item-text",staticStyle:{color:"#000","background-color":"#fff"},attrs:{nodes:n.content.msg_body.text}}):"image"===n.content.msg_type?i("v-uni-image",{staticClass:"record-chatting-item-img",attrs:{src:n.content.msg_body.media_url,"data-image":n.content.msg_body.media_url},on:{click:function(n){n.stopPropagation(),n=e.$handleEvent(n),e.handleImagePreview(n)}}}):e._e()],1):i("v-uni-view",{staticClass:"record-chatting-item self",staticStyle:{"justify-content":"flex-end"}},["text"===n.content.msg_type?i("v-uni-rich-text",{staticClass:"record-chatting-item-text",attrs:{nodes:n.content.msg_body.text}}):"image"===n.content.msg_type?i("v-uni-image",{staticClass:"record-chatting-item-img",attrs:{"data-image":n.content.msg_body.media_url,src:n.content.msg_body.media_url},on:{click:function(n){n.stopPropagation(),n=e.$handleEvent(n),e.handleImagePreview(n)}}}):e._e()],1)],1)}),1),i("v-uni-view",{staticClass:"chatinput-wrapper"},[i("v-uni-view",{staticClass:"chatinput-content"},[i("v-uni-view",{staticStyle:{width:"60upx",height:"20upx",display:"inline-block"}}),i("v-uni-input",{staticClass:"chatinput-input",staticStyle:{"margin-bottom":"20upx"},attrs:{placeholder:"输入文字","confirm-type":"send"},on:{input:function(n){n=e.$handleEvent(n),e.inputChange(n)},confirm:function(n){n=e.$handleEvent(n),e.inputSend(n)}},model:{value:e.content,callback:function(n){e.content=n},expression:"content"}}),i("v-uni-image",{staticClass:"chatinput-img emoji",attrs:{src:"/static/emoji.png"},on:{click:function(n){n.stopPropagation(),n=e.$handleEvent(n),e.toggleEmoji(n)}}}),i("v-uni-view",{staticClass:"send",on:{click:function(n){n=e.$handleEvent(n),e.sendMessage(n)}}},[e._v("发送")])],1),e.emojiFlag?i("v-uni-view",{staticClass:"chatinput-subcontent"},[i("Emoji",{attrs:{EmojiClick:e.emojiCLick}})],1):e._e()],1)],1)},o=[];i.d(n,"a",function(){return t}),i.d(n,"b",function(){return o})},a30d:function(e,n,i){"use strict";var t=i("8a23"),o=i.n(t);o.a},aae3c:function(e,n,i){"use strict";i.r(n);var t=i("00fa"),o=i.n(t);for(var a in t)"default"!==a&&function(e){i.d(n,e,function(){return t[e]})}(a);n["default"]=o.a},b90a:function(e,n,i){"use strict";i.r(n);var t=i("fe5e"),o=i.n(t);for(var a in t)"default"!==a&&function(e){i.d(n,e,function(){return t[e]})}(a);n["default"]=o.a},f724:function(e,n,i){var t=i("13f9");"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var o=i("4f06").default;o("213184f0",t,!0,{sourceMap:!1,shadowMode:!1})},fa1f:function(e,n,i){"use strict";var t=i("f724"),o=i.n(t);o.a},fe5e:function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(i("2a0e"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return s(e)||l(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var n=0,i=new Array(e.length);n<e.length;n++)i[n]=e[n];return i}}var c={props:{EmojiClick:{type:Function,default:null}},data:function(){return{localAlbumImages:["/images/album-emoji.png"],albumArr:[],currentAlbum:"emoji",emojiList:{},currentAlbumKeys:[]}},created:function(){this.init()},methods:{init:function(){console.log("开始加载==========");var e=this.splitAlbumKeys(Object.keys(t.default.emojiList[this.currentAlbum]),"emoji"==this.currentAlbum?23:10);this.albumArr=t.default.albumArr,this.emojiList=t.default.emojiList,this.currentAlbumKeys=e},splitAlbumKeys:function(e,n,i){var t=n||23,o=[],r=Math.ceil(e.length/t),l=0;if(1==r)o=[a(e)];else{for(var s=1;s<r;s++){var c=[];c=a(e.slice(l,s*t)),l=s*t,o.push(c)}o.push(a(e.slice(t*(r-1),e.length)))}return"emoji"!=i&&"emoji"!=this.currentAlbum||o.map(function(e,n){n!=o.length-1&&e.push("[删除]")}),o},emojiTap:function(e){var n=e.target.dataset.emoji;n&&this.EmojiClick(n)},emojiSend:function(){this.$emit("EmojiSend")}}};n.default=c}}]);