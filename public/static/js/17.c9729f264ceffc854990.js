webpackJsonp([17],{ckxI:function(t,e){},"q/TM":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("PxNw"),i=a("YjSi"),s=a("GeXn"),l=a("z+TU"),n={name:"focus",data:function(){return{form:{},data:[],radio:"",dialogFormVisible:!1,formLabelWidth:"80px",textarea:"",page:0,count:0,productid:"",showCode:!0,outTime:60,imgCode:""}},mounted:function(){this.getData(),this.getImgCode()},methods:{getData:function(){var t=this,e=this.page;s.a.getFocusList({page:e,type:2}).then(function(e){console.log("data",e),t.data=e.data,t.count=e.count})},pageChange:function(t){this.page=t-1,window.scrollTo(0,0),this.getData()},getImgCode:function(){var t=this;l.a.getImgCode().then(function(e){t.imgCode=e})},getCode:function(){var t=this;console.log("this.form;",this.form);var e=this.form,a=e.phone,o=void 0===a?"":a,i=e.img_code,s=void 0===i?"":i,n=this;if(this.validatePhone(o)){this.showCode=!1;var r=setInterval(function(){0==n.outTime&&(n.showCode=!0,n.outTime=60,clearInterval(r)),n.outTime--},1e3);l.a.getPhoneCode({phone:o,img_code:s}).then(function(e){t.$message.success("验证码获取成功")})}},validatePhone:function(t){return 11==t.length||(this.$message.error("手机号码格式不正确"),!1)},cancelFocus:function(t){var e=this,a=t.currentTarget.dataset.id;console.log("id",a),s.a.cancelCollect({id:a,type:1}).then(function(t){e.$message.success("取消关注成功"),e.getData()})}},components:{PersonalHeader:o.a,PersonalMenu:i.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"focus"},[a("PersonalHeader"),t._v(" "),a("div",{staticClass:"wrapper clearfix content"},[a("PersonalMenu",{staticClass:"fl",attrs:{currentMenu:"2"}}),t._v(" "),a("div",{staticClass:"fr right"},[t._m(0),t._v(" "),a("div",{staticClass:"per"},t._l(t.data,function(e){return a("router-link",{key:"focus"+e.id,staticClass:"item",attrs:{to:"detail?id="+e.id}},[a("img",{attrs:{src:e.img,alt:""}}),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"name clearfix"},[a("span",{staticClass:"fl"},[t._v(t._s(e.item_name))]),t._v(" "),a("span",{staticClass:"money fr"},[t._v("￥"+t._s(e.money)+"万")])]),t._v(" "),a("div",{staticClass:"detail"},[a("div",{staticClass:"info"},[t._v("\n                  所属行业："),a("span",[t._v(t._s(e.cate_name))])]),t._v(" "),a("div",{staticClass:"info"},[t._v("\n                  直营店："),a("span",[t._v(t._s(e.shop_count)+"家")])]),t._v(" "),a("div",{staticClass:"info"},[t._v("\n                  申请人数："),a("span",[t._v(t._s(e.apply))])]),t._v(" "),a("div",{staticClass:"info"},[t._v("\n                  加盟店："),a("span",[t._v(t._s(e.fran_store_num)+"家")])])])]),t._v(" "),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){a.preventDefault(),t.dialogFormVisible=!0,t.productid=e.id}}},[t._v("立即咨询")]),t._v(" "),a("el-button",{attrs:{"data-id":e.id},on:{click:function(e){return e.preventDefault(),t.cancelFocus(e)}}},[t._v("取消关注")])],1)])}),1),t._v(" "),a("el-pagination",{staticClass:"pages",attrs:{background:"",layout:"prev, pager, next",total:t.count},on:{"current-change":t.pageChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"立即咨询",visible:t.dialogFormVisible,center:"",width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"姓名","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入您的姓名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":t.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("男")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("女")])],1),t._v(" "),a("el-form-item",{attrs:{label:"手机","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入您的手机号"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{staticClass:"code",attrs:{label:"图片验证","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"codeLeft",attrs:{placeholder:"请输入图片验证码"},model:{value:t.form.img_code,callback:function(e){t.$set(t.form,"img_code",e)},expression:"form.img_code"}}),t._v(" "),a("img",{staticClass:"codeRight",attrs:{src:t.imgCode,alt:""},on:{click:t.getImgCode}})],1),t._v(" "),a("el-form-item",{staticClass:"code",attrs:{label:"验证码","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入手机验证码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),t._v(" "),a("div",{staticClass:"codeRight"},[t.showCode?a("div",{staticClass:"codeBtn",on:{click:t.getCode}},[t._v("\n            获取验证码\n          ")]):a("div",{staticClass:"codeBtn outTime"},[t._v("\n            "+t._s(t.outTime)+"S后重新获取\n          ")])])],1),t._v(" "),a("el-form-item",{attrs:{label:"","label-width":"40px"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入您要咨询的内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header clearfix"},[e("div",{staticClass:"tab fl currentTab"},[this._v("我的关注")])])}]};var c=a("VU/8")(n,r,!1,function(t){a("ckxI")},"data-v-3dfbea91",null);e.default=c.exports}});
//# sourceMappingURL=17.c9729f264ceffc854990.js.map